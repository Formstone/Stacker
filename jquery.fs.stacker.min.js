/* 
 * Stacker v0.0.1 - 2014-10-28 
 * A jQuery plugin for responsive tables that retain column headers. Part of the Formstone Library. 
 * http://formstone.it/selecter/ 
 * 
 * Copyright 2014 Matt Hisamoto; MIT Licensed 
 */

!function(a,b){"use strict";function c(b){b=a.extend({},h,b||{}),null===g&&(g=a("body"));for(var c=a(this),e=0,f=c.length;f>e;e++)d(c.eq(e),b);return c}function d(c,d){if(c.is("table")){d=a.extend({},d,c.data("stacker-options"));var f=[],g=c.find("caption"),h=c.find("thead"),i=h.find("th"),j=!1,k=c.find("tbody tr");i.length||(j=h.find("td"),i=j),i.each(function(){f.push(a(this).html())});var l,m="";m+="<table ",c.attr("id")&&(m+='id="stacker-'+c.attr("id")+'" '),m+='class="stacker stacker-table '+d.customClass,d.preserveClasses&&(m+=" "+c.attr("class")),m+='">',g.length&&(m+="<caption",d.preserveClasses&&g.attr("class")&&(m+=' class="'+g.attr("class")+'"'),m+=">"+g.html()+"</caption>"),m+="<tbody>";for(var n=0,o=k.length;o>n;n++){var p=k.eq(n),q=p.find("td");m+="<tr><td><table>",m+="<thead><th",d.preserveClasses&&q.eq(0).attr("class")&&(m+=' class="'+q.eq(0).attr("class")+'"'),m+=">",m+=f[0],m+="</th><th",d.preserveClasses&&q.eq(0).attr("class")&&(m+=' class="'+q.eq(0).attr("class")+'"'),m+=">",m+=q.eq(0).html(),m+="</th></thead>",m+="<tbody>";for(var r=1,s=q.length;s>r;r++)m+="<tr><td",d.preserveClasses&&q.eq(r).attr("class")&&(m+=' class="'+q.eq(r).attr("class")+'"'),m+=">",m+=f[r],m+="</td><td",d.preserveClasses&&q.eq(r).attr("class")&&(m+=' class="'+q.eq(r).attr("class")+'"'),m+=">",m+=q.eq(r).html(),m+="</td></tr>";m+="</tbody></table></td></tr>"}m+="</tbody></table>",l=a(m),c.addClass("stacker stacker-original").after(l);var t=a.extend(!0,{$table:c,$stackerTable:l},d);t.$table.data("stacker",t),void 0!==b.matchMedia&&(t.mediaQuery=b.matchMedia("(max-width:"+(1/0===t.maxWidth?"100000px":t.maxWidth)+")"),t.mediaQuery.addListener(function(){e.apply(t.$table)}),e.apply(t.$table))}}function e(){var b=a(this).data("stacker");b.mediaQuery.matches?i.enable.apply(b.$table):i.disable.apply(b.$table)}var f=b.navigator.userAgent||b.navigator.vendor||b.opera,g=(/Firefox/i.test(f),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(f),null),h={callback:a.noop,customClass:"",maxWidth:"740px",preserveClasses:!1},i={defaults:function(b){return h=a.extend(h,b||{}),a(this)},disable:function(){return a(this).each(function(b,c){var d=a(c).data("stacker");d&&(d.$table.addClass("enabled"),d.$stackerTable.removeClass("enabled"))})},enable:function(){return a(this).each(function(b,c){var d=a(c).data("stacker");d&&(d.$table.removeClass("enabled"),d.$stackerTable.addClass("enabled"))})}};a.fn.stacker=function(a){return i[a]?i[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.stacker=function(a){"defaults"===a&&i.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);